<!DOCTYPE html>
<html lang="ja">
	<head>
		<meta charset="UTF-8" />
		<title>atmosphere</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<!-- Loading Bootstrap -->
		<link href="css/bootstrap.css" rel="stylesheet">
		
		<!-- Loading Flat UI -->
		<link href="css/flat-ui.css" rel="stylesheet">

		<!-- HTML5 shim, for IE6-8 support of HTML5 elements. All other JS at the end of file. -->
		<!--[if lt IE 9]>
			<script src="js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body style="padding-top: 60px;">
		<!-- invisible forms -->
		<div style="display:none;">
			<form class="form">
				<input type="hidden" id="param_method" value="" />
				<input type="hidden" id="param_url" value="" />
				<input type="hidden" id="param_parameter" value="" />
	            <input type="hidden" id="param_atmos_session_id" value="" />
			</form>
		</div>
		
		<div id="loginDialog" class="modal hide fade" role="dialog" tabindex="-1" aria-labelledby="loginDialogLabel" aria-hidden="true">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
				<h3 Id="loginDialogLabel">Login</h3>
			</div>
			<div class="modal-body">
				<input type="hidden" name="method" value="POST" id="login_dialog_method" />
				<input type="hidden" name="url" value="/atmos/auth/login" id="login_dialog_url" />
				<input type="text" class="input-block-level" placeholder="UserId" name="userId" value="bob" id="login_dialog_user_id" />
				<input type="password" class="input-block-level" placeholder="Password" name="password" value="BOB" id="login_dialog_password" />
			</div>
			<div class="modal-footer">
				<button class="btn" data-dismiss="modal" aria-hidden="true">Cancel</button>
				<button class="btn btn-primary" id="loginDialogOK">OK</button>
			</div>
		</div>

		<div id="manualSenderDialog" class="modal hide fade" role="dialog" tabindex="-1" aria-labelledby="manualSenderDialogLabel" aria-hidden="true">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
				<h3 Id="manualSenderDialogLabel">Send Request</h3>
			</div>
			<div class="modal-body">
                <label class="radio inline">
                    METHOD
                </label>
                <label class="radio inline">
                    <input type="radio" name="methodRadioManually" value="GET" checked>GET
                </label>
                <label class="radio inline">
                    <input type="radio" name="methodRadioManually" value="POST">POST
                </label>
				<input type="text" class="input-block-level" placeholder="URL" name="url" value="/atmos/" id="param_url_manually" />
				<textarea rows="3" class="input-block-level" placeholder="Parameters" name="parameter" value="" id="param_parameter_manually" ></textarea>
			</div>
			<div class="modal-footer">
				<button class="btn" data-dismiss="modal" aria-hidden="true">Cancel</button>
				<button class="btn btn-primary" id="manualSenderDialogOK">OK</button>
			</div>
		</div>

		<div id="messageSenderDialog" class="modal hide fade" role="dialog" tabindex="-1" aria-labelledby="messageSenderDialogLabel" aria-hidden="true">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
				<h3 Id="messageSenderDialogLabel">Send Message</h3>
			</div>
			<div class="modal-body">
				<input type="hidden" name="method" value="POST" id="message_sender_dialog_method" />
				<input type="hidden" name="url" value="/atmos/messages/send" id="message_sender_dialog_url" />
				<textarea rows="3" class="input-block-level" placeholder="Please write messages." name="message_sender_message_body" value="" id="message_sender_message_body" ></textarea>
			</div>
			<div class="modal-footer">
				<button class="btn" data-dismiss="modal" aria-hidden="true">Cancel</button>
				<button class="btn btn-primary" id="messageSenderDialogOK">OK</button>
			</div>
		</div>

		<!-- navigation bar -->
        <div class="navbar navbar-inverse navbar-fixed-top">
          <div class="navbar-inner">
            <div class="container">
              <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target="#nav-collapse-01"></button>
	          <span class="brand">atmosphere - Next Generation Commnunication Tool -</span>
              <div class="nav-collapse collapse" id="nav-collapse-01">
                <ul class="nav">
                  <li>
                    <a href="#" id="sendRequestManualButton">
                      Send Request
                    </a>
                  </li>
                  <li>
                    <a href="#" id="loginButton">
                      Login
                    </a>
                  </li>
                </ul>
              </div><!--/.nav -->
            </div>
          </div>
		</div>

		<div class="container">
<!--
            <h1>
                atmosphere<small> - Next Generation Communication Tool - </small>
            </h1>
-->
            <div class="row" style="margin-top:4px;">
				<div class="span4">
					<div class="timeline palette-global-timeline-base-color">
						<div class="timeline-header">
    						<a id="send_message_button_on_global_timeline" style="float:left;" href="#"><i class="fui-bubble-16"></i></a>
    						<a id="refresh_global_timeline_button" style="float:right;" href="#"><i class="fui-heart-16"></i></a>
                            <span class="timeline-title">
                                Global Timeline
                            </span>
    					</div>
						<div id="global-timeline-area" class="timeline-area"></div>
                    </div>
				</div>
				<div class="span4">
					<div class="timeline palette-my-timeline-base-color">
						<div class="timeline-header">
    						<a id="send_message_button_on_my_timeline" style="float:left;" href="#"><i class="fui-bubble-16"></i></a>
    						<a id="refresh_my_timeline_button" style="float:right;" href="#"><i class="fui-heart-16"></i></a>
                            <span class="timeline-title">
                                My Timeline
                            </span>
    					</div>
						<div id="my-timeline-area" class="timeline-area"></div>
                    </div>
				</div>
				<div class="span4">
					<div class="timeline palette-talk-timeline-base-color">
						<div class="timeline-header">
    						<a id="send_message_button_on_talk_timeline" style="float:left;" href="#"><i class="fui-bubble-16"></i></a>
    						<a id="refresh_talk_timeline_button" style="float:right;" href="#"><i class="fui-heart-16"></i></a>
                            <span class="timeline-title">
                                Talk Timeline
                            </span>
    					</div>
						<div id="talk-timeline-area" class="timeline-area"></div>
                    </div>
				</div>
			</div>
            <div class="row" style="margin-top:4px;">
				<div class="span4">
					<div class="timeline palette-announce-timeline-base-color">
						<div class="timeline-header">
    						<a id="send_announce_button" style="float:left;" href="#"><i class="fui-bubble-16"></i></a>
    						<a id="refresh_announce_timeline_button" style="float:right;" href="#"><i class="fui-heart-16"></i></a>
                            <span class="timeline-title">
                                Announce Timeline
                            </span>
    					</div>
						<div id="announce-timeline-area" class="timeline-area"></div>
                    </div>
				</div>
				<div class="span4">
					<div class="timeline palette-monolog-timeline-base-color">
						<div class="timeline-header">
    						<a id="send_monolog_button" style="float:left;" href="#"><i class="fui-bubble-16"></i></a>
    						<a id="refresh_monolog_timeline_button" style="float:right;" href="#"><i class="fui-heart-16"></i></a>
                            <span class="timeline-title">
                                Monologue Timeline
                            </span>
    					</div>
						<div id="monolog-timeline-area" class="timeline-area"></div>
                    </div>
				</div>
				<div class="span4">
					<div class="timeline palette-private-timeline-base-color">
						<div class="timeline-header">
    						<a id="send_private_button" style="float:left;" href="#"><i class="fui-bubble-16"></i></a>
    						<a id="refresh_private_timeline_button" style="float:right;" href="#"><i class="fui-heart-16"></i></a>
                            <span class="timeline-title">
                                Private Timeline
                            </span>
    					</div>
						<div id="private-timeline-area" class="timeline-area"></div>
                    </div>
				</div>
			</div>
		</div>
		<div class="container-fluid" id="resultArea">
		</div>

		<!-- Load JS here for greater good =============================-->
		<script src="js/jquery-1.8.2.min.js"></script>
		<script src="js/jquery-ui-1.10.0.custom.min.js"></script>
		<script src="js/jquery.dropkick-1.0.0.js"></script>
		<script src="js/custom_checkbox_and_radio.js"></script>
		<script src="js/custom_radio.js"></script>
		<script src="js/jquery.tagsinput.js"></script>
		<script src="js/bootstrap-tooltip.js"></script>
		<script src="js/jquery.placeholder.js"></script>
		<script src="js/bootstrap-modal.js"></script>
		<script src="js/bootstrap-transition.js"></script>
		<script src="js/jquery-tap.js"></script>
		<script src="js/myutil.js"></script>
<script type="text/javascript">
<!--
function submitJson(callbackFunc, requiredToShowConfirm) {
    var headerNameAtmosSessionId = 'atmosphere-session-id';
    var targetMethod = $("#param_method").val();
	var targetUrl = $("#param_url").val();
	var targetParams = $("#param_parameter").val();
    var atmosSessionId = $("#param_atmos_session_id").val();
	
	if (targetMethod === 'GET' && targetParams.length > 0) {
		var queryString = '';
		var paramsJSON = JSON.parse(targetParams);
		for (var pKey in paramsJSON) {
            var rawValue = paramsJSON[pKey];
            if (isJson(rawValue)) {
                var encodedValue = encodeURI(JSON.stringify(rawValue));
            }
            else {
                var encodedValue = encodeURI(rawValue);
            }
			if (queryString.length > 0) {
				queryString += '&';
			}
			queryString += pKey + '=' + encodedValue;
		}
		targetParams = queryString;
	}

    var headers = {};
    headers[headerNameAtmosSessionId] = atmosSessionId;
    
	var sendRequestFunc = function() {
		var requestParams = {
			url: targetUrl,
			type: targetMethod,
			//dataType: 'json',
			dataType: 'text',
			//data: paramObj
			data: targetParams,
            headers: headers
		};
	
		$.ajax(requestParams)
		.done(function(data, textStatus, xhr){
			// store atmosSessionId
            var atmosSessionId = xhr.getResponseHeader('atmosphere-session-id');
            if (typeof(atmosSessionId) != 'undefined' && atmosSessionId != null && atmosSessionId.length > 0) {
                $("#param_atmos_session_id").val(atmosSessionId);
            }

			// log result
			$('#resultArea').prepend(
				'<div class="span3">'
				+ '	<textarea rows="12" class="input-block-level" placeholder="" disabled></textarea> '
				+ '</div>');
			$("#resultArea > div:first > textarea:first").val(data);

			// call calback
			if (typeof(callbackFunc) != 'undefined' && callbackFunc != null) {
				callbackFunc(data, textStatus, xhr);
			}
		})
		.fail(function(xhr, textStatus, errorThrown){
			alert('error');
			//window.console.debug(errorThrown);
		})
		.always(function(xhr, textStatus, errorThrown){
			//window.console.debug(textStatus);
		});
	};

	if (requiredToShowConfirm) {
		//確認ダイアログを表示
		showConfirmDialog(
			'Confirmation!!!',
			'Are you sure to send request?<br /><p class="text-info">' + targetUrl + '</p>',
			sendRequestFunc
		);
	}
	else {
		sendRequestFunc();
	}

	return false;
}

function refreshGlobalTimeline() {
    $("#param_method").val('GET');
	$("#param_url").val('/atmos/messages/global_timeline');
	$("#param_parameter").val("");
	//確認ダイアログを表示

	var callback = function(data, textStatus, xhr) {
		var resultJSON = JSON.parse(data);
		if (resultJSON['count'] > 0) {
			for (var resultIndex = resultJSON['count'] - 1; resultIndex >= 0; resultIndex--) {
				var result = resultJSON['results'][resultIndex];
				var timelineItems = $("#global-timeline-area").children();
				if (timelineItems.length > 0 && timelineItems[0].id >= result['created_at']) {
					continue;
				}
				var avatorPaths = [
					'images/illustrations/paper.png', 
					'images/illustrations/bag.png', 
					'images/illustrations/infinity.png', 
					'images/illustrations/gift.png', 
				];
				$("#global-timeline-area").prepend(
				'<div class="timeline-item" id="' + result['created_at'] + '">'
				+ '	<div class="timeline-item avator">'
                + '    	<img src="' + avatorPaths[resultIndex % 4] + '" />'
				+ '	</div>'
				+ '	<span><p class="timeline-item byat">' + result['created_by'] + ' - ' + utc2jst(result['created_at']) + '</p></span>'
                + '    <div class="tooltip timeline-item fade right in">'
                + '        <div class="tooltip-arrow timeline-item-arrow palette-global-timeline-border-right-color"></div>'
                + '        <div class="tooltip-innter timeline-item-inner palette-global-timeline-bg-color">' + result['message'] + '</div>'
                + '    </div>'
				+ '</div>'
				+ '<div style="clear:right;"></div>');
			}
		}
	};

	submitJson(callback);

	return false;
}

function refreshMyTimeline() {
    $("#param_method").val('GET');
	$("#param_url").val('/atmos/messages/focused_timeline');
	$("#param_parameter").val("");
	//確認ダイアログを表示

	var callback = function(data, textStatus, xhr) {
		var resultJSON = JSON.parse(data);
		if (resultJSON['count'] > 0) {
			for (var resultIndex = resultJSON['count'] - 1; resultIndex >= 0; resultIndex--) {
				var result = resultJSON['results'][resultIndex];
				var timelineItems = $("#my-timeline-area").children();
				if (timelineItems.length > 0 && timelineItems[0].id >= result['created_at']) {
					continue;
				}
				var avatorPaths = [
					'images/illustrations/paper.png', 
					'images/illustrations/bag.png', 
					'images/illustrations/infinity.png', 
					'images/illustrations/gift.png', 
				];
				$("#my-timeline-area").prepend(
				'<div class="timeline-item" id="' + result['created_at'] + '">'
				+ '	<div class="timeline-item avator">'
                + '    	<img src="' + avatorPaths[resultIndex % 4] + '" />'
				+ '	</div>'
				+ '	<span><p class="timeline-item byat">' + result['created_by'] + ' - ' + utc2jst(result['created_at']) + '</p></span>'
                + '    <div class="tooltip timeline-item fade right in">'
                + '        <div class="tooltip-arrow timeline-item-arrow palette-my-timeline-border-right-color"></div>'
                + '        <div class="tooltip-innter timeline-item-inner palette-my-timeline-bg-color">' + result['message'] + '</div>'
                + '    </div>'
				+ '</div>'
				+ '<div style="clear:right;"></div>');
			}
		}
	};

	submitJson(callback);

	return false;
}

function refreshTalkTimeline() {
    $("#param_method").val('GET');
	$("#param_url").val('/atmos/messages/talk_timeline');
	$("#param_parameter").val("");
	//確認ダイアログを表示

	var callback = function(data, textStatus, xhr) {
		var resultJSON = JSON.parse(data);
		if (resultJSON['count'] > 0) {
			for (var resultIndex = resultJSON['count'] - 1; resultIndex >= 0; resultIndex--) {
				var result = resultJSON['results'][resultIndex];
				var timelineItems = $("#talk-timeline-area").children();
				if (timelineItems.length > 0 && timelineItems[0].id >= result['created_at']) {
					continue;
				}
				var avatorPaths = [
					'images/illustrations/paper.png', 
					'images/illustrations/bag.png', 
					'images/illustrations/infinity.png', 
					'images/illustrations/gift.png', 
				];
				$("#talk-timeline-area").prepend(
				'<div class="timeline-item" id="' + result['created_at'] + '">'
				+ '	<div class="timeline-item avator">'
                + '    	<img src="' + avatorPaths[resultIndex % 4] + '" />'
				+ '	</div>'
				+ '	<span><p class="timeline-item byat">' + result['created_by'] + ' - ' + utc2jst(result['created_at']) + '</p></span>'
                + '    <div class="tooltip timeline-item fade right in">'
                + '        <div class="tooltip-arrow timeline-item-arrow palette-talk-timeline-border-right-color"></div>'
                + '        <div class="tooltip-innter timeline-item-inner palette-talk-timeline-bg-color">' + result['message'] + '</div>'
                + '    </div>'
				+ '</div>'
				+ '<div style="clear:right;"></div>');
			}
		}
	};

	submitJson(callback);

	return false;
}

function refreshAnnounceTimeline() {
    $("#param_method").val('GET');
	$("#param_url").val('/atmos/announce/timeline');
	$("#param_parameter").val("");
	//確認ダイアログを表示

	var callback = function(data, textStatus, xhr) {
		var resultJSON = JSON.parse(data);
		if (resultJSON['count'] > 0) {
			for (var resultIndex = resultJSON['count'] - 1; resultIndex >= 0; resultIndex--) {
				var result = resultJSON['results'][resultIndex];
				var timelineItems = $("#announce-timeline-area").children();
				if (timelineItems.length > 0 && timelineItems[0].id >= result['created_at']) {
					continue;
				}
				var avatorPaths = [
					'images/illustrations/paper.png', 
					'images/illustrations/bag.png', 
					'images/illustrations/infinity.png', 
					'images/illustrations/gift.png', 
				];
				$("#announce-timeline-area").prepend(
				'<div class="timeline-item" id="' + result['created_at'] + '">'
				+ '	<div class="timeline-item avator">'
                + '    	<img src="' + avatorPaths[resultIndex % 4] + '" />'
				+ '	</div>'
				+ '	<span><p class="timeline-item byat">' + result['created_by'] + ' - ' + utc2jst(result['created_at']) + '</p></span>'
                + '    <div class="tooltip timeline-item fade right in">'
                + '        <div class="tooltip-arrow timeline-item-arrow palette-announce-timeline-border-right-color"></div>'
                + '        <div class="tooltip-innter timeline-item-inner palette-announce-timeline-bg-color">' + result['message'] + '</div>'
                + '    </div>'
				+ '</div>'
				+ '<div style="clear:right;"></div>');
			}
		}
	};

	submitJson(callback);

	return false;
}

function refreshMonologTimeline() {
    $("#param_method").val('GET');
	$("#param_url").val('/atmos/monolog/timeline');
	$("#param_parameter").val("");
	//確認ダイアログを表示

	var callback = function(data, textStatus, xhr) {
		var resultJSON = JSON.parse(data);
		if (resultJSON['count'] > 0) {
			for (var resultIndex = resultJSON['count'] - 1; resultIndex >= 0; resultIndex--) {
				var result = resultJSON['results'][resultIndex];
				var timelineItems = $("#monolog-timeline-area").children();
				if (timelineItems.length > 0 && timelineItems[0].id >= result['created_at']) {
					continue;
				}
				var avatorPaths = [
					'images/illustrations/paper.png', 
					'images/illustrations/bag.png', 
					'images/illustrations/infinity.png', 
					'images/illustrations/gift.png', 
				];
				$("#monolog-timeline-area").prepend(
				'<div class="timeline-item" id="' + result['created_at'] + '">'
				+ '	<div class="timeline-item avator">'
                + '    	<img src="' + avatorPaths[resultIndex % 4] + '" />'
				+ '	</div>'
				+ '	<span><p class="timeline-item byat">' + result['created_by'] + ' - ' + utc2jst(result['created_at']) + '</p></span>'
                + '    <div class="tooltip timeline-item fade right in">'
                + '        <div class="tooltip-arrow timeline-item-arrow palette-monolog-timeline-border-right-color"></div>'
                + '        <div class="tooltip-innter timeline-item-inner palette-monolog-timeline-bg-color">' + result['message'] + '</div>'
                + '    </div>'
				+ '</div>'
				+ '<div style="clear:right;"></div>');
			}
		}
	};

	submitJson(callback);

	return false;
}

function refreshPrivateTimeline() {
    $("#param_method").val('GET');
	$("#param_url").val('/atmos/private/timeline');
	$("#param_parameter").val("");
	//確認ダイアログを表示

	var callback = function(data, textStatus, xhr) {
		var resultJSON = JSON.parse(data);
		if (resultJSON['count'] > 0) {
			for (var resultIndex = resultJSON['count'] - 1; resultIndex >= 0; resultIndex--) {
				var result = resultJSON['results'][resultIndex];
				var timelineItems = $("#private-timeline-area").children();
				if (timelineItems.length > 0 && timelineItems[0].id >= result['created_at']) {
					continue;
				}
				var avatorPaths = [
					'images/illustrations/paper.png', 
					'images/illustrations/bag.png', 
					'images/illustrations/infinity.png', 
					'images/illustrations/gift.png', 
				];
				$("#private-timeline-area").prepend(
				'<div class="timeline-item" id="' + result['created_at'] + '">'
				+ '	<div class="timeline-item avator">'
                + '    	<img src="' + avatorPaths[resultIndex % 4] + '" />'
				+ '	</div>'
				+ '	<span><p class="timeline-item byat">' + result['created_by'] + ' - ' + utc2jst(result['created_at']) + '</p></span>'
                + '    <div class="tooltip timeline-item fade right in">'
                + '        <div class="tooltip-arrow timeline-item-arrow palette-private-timeline-border-right-color"></div>'
                + '        <div class="tooltip-innter timeline-item-inner palette-private-timeline-bg-color">' + result['message'] + '</div>'
                + '    </div>'
				+ '</div>'
				+ '<div style="clear:right;"></div>');
			}
		}
	};

	submitJson(callback);

	return false;
}

function submitJsonManually() {
    $("#param_method").val($("input:radio[name='methodRadioManually']:checked").val());
	$("#param_url").val($("#param_url_manually").val());
	$("#param_parameter").val($("#param_parameter_manually").val());

	submitJson();

	return false;
}

function tryLogin() {

	var loginFunc = function () {
	    var targetMethod = $("#login_dialog_method").val();
		var targetUrl = $("#login_dialog_url").val();
		var inputtedUserId = $("#login_dialog_user_id").val();
		var inputtedPassword = $("#login_dialog_password").val();
	 	var paramJSON = {};
	    paramJSON['user_id'] = inputtedUserId;
	    paramJSON['password'] = inputtedPassword;
	
	    var headers = {};
	    
	    var requestParams = {
	        url: targetUrl,
	        type: targetMethod,
	        dataType: 'text',
	        data: JSON.stringify(paramJSON),
	        headers: headers
	    };
	
	    $.ajax(requestParams)
	    .done(function(data, textStatus, xhr){
	        var atmosSessionId = xhr.getResponseHeader('atmosphere-session-id');
	        if (typeof(atmosSessionId) != 'undefined' && atmosSessionId != null && atmosSessionId.length > 0) {
	            $("#param_atmos_session_id").val(atmosSessionId);
	        }
	    })
	    .fail(function(xhr, textStatus, errorThrown){
	        alert('error');
	        //window.console.debug(errorThrown);
	    })
	    .always(function(xhr, textStatus, errorThrown){
	        //window.console.debug(textStatus);
	    });
	
		return false;
	}

	showDialog(
		'loginDialog',
		'loginDialogLabel',
		'loginDialogOK',
		loginFunc,
		null,
		true
	);

	return false;
}

function submitJsonManually() {

	var sendRequestFunc = function () {
	    $("#param_method").val($("input:radio[name='methodRadioManually']:checked").val());
		$("#param_url").val($("#param_url_manually").val());
		$("#param_parameter").val($("#param_parameter_manually").val());

		submitJson();

		return false;
	}

	showDialog(
		'manualSenderDialog',
		'manualSenderDialogLabel',
		'manualSenderDialogOK',
		sendRequestFunc,
		null,
		true
	);

	return false;
}

function sendMessage() {

	var sendMessageFunc = function () {
    	var headerNameAtmosSessionId = 'atmosphere-session-id';
	    var targetMethod = $("#message_sender_dialog_method").val();
		var targetUrl = $("#message_sender_dialog_url").val();
		var inputtedMessage = $("#message_sender_message_body").val();
	 	var paramJSON = {};
	    paramJSON['message'] = inputtedMessage;
    	var atmosSessionId = $("#param_atmos_session_id").val();
	
        var headers = {};
        headers[headerNameAtmosSessionId] = atmosSessionId;
	    
	    var requestParams = {
	        url: targetUrl,
	        type: targetMethod,
	        dataType: 'text',
	        data: JSON.stringify(paramJSON),
	        headers: headers
	    };
	
	    $.ajax(requestParams)
	    .done(function(data, textStatus, xhr){
	        var atmosSessionId = xhr.getResponseHeader('atmosphere-session-id');
	        if (typeof(atmosSessionId) != 'undefined' && atmosSessionId != null && atmosSessionId.length > 0) {
	            $("#param_atmos_session_id").val(atmosSessionId);
	        }
	    })
	    .fail(function(xhr, textStatus, errorThrown){
	        alert('error');
	        //window.console.debug(errorThrown);
	    })
	    .always(function(xhr, textStatus, errorThrown){
	        //window.console.debug(textStatus);
	    });
	
		return false;
	}

	showDialog(
		'messageSenderDialog',
		'messageSenderDialogLabel',
		'messageSenderDialogOK',
		sendMessageFunc,
		null,
		true
	);

	return false;
}

$(document).ready(function() {
	$('#loginButton').on('click', function() {
		tryLogin();
	});
	$('#sendRequestManualButton').on('click', function() {
		submitJsonManually();
	});
	$('#send_message_button_on_global_timeline').on('click', function() {
		sendMessage();
	});
	$('#send_message_button_on_my_timeline').on('click', function() {
		sendMessage();
	});
	$('#send_message_button_on_talk_timeline').on('click', function() {
		sendMessage();
	});
	$('#refresh_global_timeline_button').on('click', function() {
		refreshGlobalTimeline();
	});
	$('#refresh_my_timeline_button').on('click', function() {
		refreshMyTimeline();
	});
	$('#refresh_talk_timeline_button').on('click', function() {
		refreshTalkTimeline();
	});
	$('#refresh_announce_timeline_button').on('click', function() {
		refreshAnnounceTimeline();
	});
	$('#refresh_monolog_timeline_button').on('click', function() {
		refreshMonologTimeline();
	});
	$('#refresh_private_timeline_button').on('click', function() {
		refreshPrivateTimeline();
	});
});
-->

</script>
	</body>
</html>
